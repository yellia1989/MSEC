**运行环境**

CPU: Intel(R) Xeon(R) CPU X3440 @ 2.53GHz 8核<br/>
内存：8GB<br/>
网卡：千兆网卡<br/>
Client与Server之间PING值：0.83ms<br/>
Server与Server2之间PING值：0.84ms<br/>

**测试程序：**

A.  echo服务：Server将请求字符串直接返回<br/>
B.  延时echo服务：Server先sleep 100ms, 再将请求字符串返回<br/>
C.  rpc-echo服务：Server将请求转发至Server2, Server2将请求字符串直接返回。目标是测试Server的性能。<br/>
D.  延时rpc-echo服务：Server将请求转发至Server2， Server2先sleep 100ms, 再将请求字符串返回。目标是测试Server的性能<br/>
（请求字符串小于100字节）

**TCP请求连接模式：**

短连接：每个请求都需要建立TCP连接<br/>
长连接：建立TCP连接后，保持不断开，连续发送请求

**程序A测试结果(QPS及延时分布)**

|  | QPS | CPU | <5 ms | 5~10ms | 10~30 ms | 30~50 ms | >50 ms |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 长连接 | 100,000/s | 760% | 97.62% | 2.30% | 0.08% | 0 | 0 |
| 短连接 | 20,000/s | 500% | 99.63% | 0.36% | 0.01% | 0 | 0 |
  

**程序B测试结果(QPS及延时分布)**

|  | QPS | CPU | <120 ms | 120~150ms | 150~200 ms | >200 ms |
| --- | --- | --- | --- | --- | --- | --- |
| 长连接 | 27,000/s | 200% | 98.03% | 1.95% | 0.02% | 0 |
| 短连接 | 10,000/s | 200% | 98.52% | 1.38% | 0.08% | 0.02% |

**程序C测试结果(QPS及延时分布)**

|  | QPS | CPU | <5 ms | 5~10ms | 10~30 ms | 30~50 ms | >50 ms |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 长连接 | 30,000/s | 350% | 97.94% | 2.02% | 0.02% | 0 | 0.02% |
| 短连接 | 17,000/s | 450% | 80.8% |19.05% | 0.14% | 0 | 0 |

**程序D测试结果(QPS及延时分布)**

|  | QPS | CPU | <120 ms | 120~150ms | 150~200 ms | >200 ms |
| --- | --- | --- | --- | --- | --- | --- |
| 长连接 | 14,000/s | 190% | 96.20% | 3.63% | 0.17% | 0.0% |
| 短连接 | 8,000/s | 250% | 98.13% | 1.77% | 0.07% | 0.03% |


